"use strict";(self.webpackChunknew_website=self.webpackChunknew_website||[]).push([[1233],{31233:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>m,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var o=t(58168),a=(t(96540),t(15680));t(60681);const r={title:"Component Syntax",slug:"/react/component-syntax"},i=void 0,s={unversionedId:"react/component-syntax",id:"react/component-syntax",title:"Component Syntax",description:"Components are the foundation for building UIs in React. While components are typically expressed using JavaScript functions, Component Syntax provides component primitive values that provide several advantages over function components, like:",source:"@site/docs/react/component-syntax.md",sourceDirName:"react",slug:"/react/component-syntax",permalink:"/en/docs/react/component-syntax",draft:!1,editUrl:"https://github.com/facebook/flow/edit/main/website/docs/react/component-syntax.md",tags:[],version:"current",frontMatter:{title:"Component Syntax",slug:"/react/component-syntax"},sidebar:"docsSidebar",previous:{title:"Getting Started",permalink:"/en/docs/react"},next:{title:"Hook Syntax",permalink:"/en/docs/react/hook-syntax"}},m={},p=[{value:"Basic Usage",id:"basic-usage",level:2},{value:"Parameters",id:"parameters",level:2},{value:"String Parameters/Renaming Parameters",id:"string-parametersrenaming-parameters",level:3},{value:"Rest Parameters",id:"rest-parameters",level:3},{value:"Optional Parameters and Defaults",id:"optional-parameters-and-defaults",level:3},{value:"Destructuring Parameters",id:"destructuring-parameters",level:3},{value:"Ref Parameters",id:"ref-parameters",level:3},{value:"Elements of Components",id:"elements-of-components",level:2},{value:"Rules for Components",id:"rules-for-components",level:2},{value:"Enable Component Syntax",id:"toc-enable-component-syntax",level:2}],l={toc:p};function c(e){let{components:n,...t}=e;return(0,a.mdx)("wrapper",(0,o.A)({},l,t,{components:n,mdxType:"MDXLayout"}),(0,a.mdx)("p",null,(0,a.mdx)("a",{parentName:"p",href:"https://react.dev/learn/your-first-component"},"Components")," are the foundation for building UIs in React. While components are typically expressed using JavaScript functions, Component Syntax provides component primitive values that provide several advantages over function components, like:"),(0,a.mdx)("ol",null,(0,a.mdx)("li",{parentName:"ol"},"More elegant syntax with significantly less verbosity and boilerplate than functions"),(0,a.mdx)("li",{parentName:"ol"},"Type system support tailored specifically for writing React"),(0,a.mdx)("li",{parentName:"ol"},"Better support for ",(0,a.mdx)("a",{parentName:"li",href:"https://react.dev/learn/manipulating-the-dom-with-refs"},"React refs"))),(0,a.mdx)("h2",{id:"basic-usage"},"Basic Usage"),(0,a.mdx)("p",null,"You can declare a component with Component Syntax similar to how you'd declare a function:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-flow",metastring:"[]","[]":!0},"import * as React from 'react';\n\ncomponent Introduction(name: string, age: number) {\n  return <h1>My name is {name} and I am {age} years old</h1>\n}\n")),(0,a.mdx)("p",null,"You can use a component directly in JSX: ",(0,a.mdx)("inlineCode",{parentName:"p"},'<Introduction age={9} name="Mr. Flow" />'),"."),(0,a.mdx)("p",null,"There are a few important details to notice here:"),(0,a.mdx)("ol",null,(0,a.mdx)("li",{parentName:"ol"},"the prop parameter names declared in the Introduction component are the same as the prop names passed to Introduction in JSX"),(0,a.mdx)("li",{parentName:"ol"},"the order of the parameters in the declaration does not need to match the order that they are provided in JSX")),(0,a.mdx)("h2",{id:"parameters"},"Parameters"),(0,a.mdx)("h3",{id:"string-parametersrenaming-parameters"},"String Parameters/Renaming Parameters"),(0,a.mdx)("p",null,"Components also allow you to rename parameters, which is useful when your parameter name is not a valid JavaScript identifier:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-flow",metastring:"[]","[]":!0},"import * as React from 'react';\n\ncomponent RenamedParameter(\n  'required-renamed' as foo: number,\n  'optional-renamed' as bar?: number,\n  'optional-with-default-renamed' as baz?: number = 3,\n) {\n  (foo: number); // OK\n  (bar: number | void); // OK\n  (baz: number); // OK\n\n  return <div />;\n}\n")),(0,a.mdx)("h3",{id:"rest-parameters"},"Rest Parameters"),(0,a.mdx)("p",null,"Sometimes you do not want to list out every prop explicitly because you do not intend to reference them individually in your component. This is common when you are writing a component that wraps another and need to pass props from your component to the inner one:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-jsx"},"import * as React from 'react';\n\nimport type {Props as StarProps} from './Star';\nimport Star from './Star';\n\ncomponent BlueStar(...props: StarProps) {\n  return <Star {...props} color=\"blue\" />;\n}\n")),(0,a.mdx)("p",null,"Rest parameters use an object type as an annotation, which means you can use existing type utilities like object spreads and Pick to annotate more complex prop patterns:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-flow",metastring:"[]","[]":!0},"import * as React from 'react';\n\ncomponent OtherComponent(foo: string, bar: number) {\n  return foo + bar;\n}\n\ncomponent FancyProps(\n  ...props: {\n    ...React.PropsOf<OtherComponent>,\n    additionalProp: string,\n  }\n) {\n  return <OtherComponent foo={props.foo} bar={props.bar} />;\n}\n")),(0,a.mdx)("h3",{id:"optional-parameters-and-defaults"},"Optional Parameters and Defaults"),(0,a.mdx)("p",null,"Components allow you to declare optional parameters and specify defaults:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-flow",metastring:"[]","[]":!0},"import * as React from 'react';\n\ncomponent OptionalAndDefaults(\n  color: string = \"blue\",\n  extraMessage?: string,\n) {\n  let message = `My favorite color is ${color}.`;\n  if (extraMessage != null) {\n    message += `\\n${extraMessage}`;\n  }\n  return <p>{message}</p>\n}\n\n<OptionalAndDefaults /> // No error, all of the parameters are optional!\n")),(0,a.mdx)("h3",{id:"destructuring-parameters"},"Destructuring Parameters"),(0,a.mdx)("p",null,"The ",(0,a.mdx)("inlineCode",{parentName:"p"},"as")," operator also allows you to destructure your parameters:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-flow",metastring:"[]","[]":!0},"import * as React from 'react';\n\ncomponent Destructuring(\n  config as {color, height}: $ReadOnly<{color: number, height: number}>,\n) { return <div /> }\n")),(0,a.mdx)("p",null,"Rest parameters can be destructured without using as:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-flow",metastring:"[]","[]":!0},"import * as React from 'react';\n\ntype Props = $ReadOnly<{ color: string, height: number }>;\n\ncomponent DestructuredRest(...{color, height}: Props) { return <div /> }\n")),(0,a.mdx)("h3",{id:"ref-parameters"},"Ref Parameters"),(0,a.mdx)("p",null,"To access refs in components you just need to add a ref parameter."),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-flow",metastring:"[]","[]":!0},"import * as React from 'react';\n\ncomponent ComponentWithARef(ref: React.RefSetter<HTMLElement>) {\n  return <div ref={ref} />;\n}\n")),(0,a.mdx)("p",null,"Behind the scenes Component Syntax will wrap the component in the required ",(0,a.mdx)("a",{parentName:"p",href:"https://react.dev/reference/react/forwardRef"},"React.forwardRef call")," to ensure the component works as expected at runtime. The one restriction for refs is they must be defined as an inline parameter, refs within rest params are not supported. This is due to the need to compile in the ",(0,a.mdx)("inlineCode",{parentName:"p"},"forwardRef")," call, for this to work correctly we need to be able to statically determine the ref from the component definition."),(0,a.mdx)("h2",{id:"elements-of-components"},"Elements of Components"),(0,a.mdx)("p",null,"For components declared in Component Syntax, you can use ",(0,a.mdx)("inlineCode",{parentName:"p"},"ComponentName")," to reference the type of an element of that component.\nFor components not using Component Syntax you have to write ",(0,a.mdx)("inlineCode",{parentName:"p"},"React.Element<typeof ComponentName>"),"."),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-flow",metastring:'[{"startLine":7,"startColumn":19,"endLine":7,"endColumn":21,"description":"Cannot assign `<Foo />` to `bar` because component Foo [1] is incompatible with component Bar [2] in type argument `ElementType` [3]. [incompatible-type-arg]"}]','[{"startLine":7,"startColumn":19,"endLine":7,"endColumn":21,"description":"Cannot':!0,assign:!0,"`<Foo":!0,"/>`":!0,to:!0,"`bar`":!0,because:!0,component:!0,Foo:!0,"[1]":!0,is:!0,incompatible:!0,with:!0,Bar:!0,"[2]":!0,in:!0,type:!0,argument:!0,"`ElementType`":!0,"[3].":!0,'[incompatible-type-arg]"}]':!0},"import * as React from 'react';\n\ndeclare component Foo();\ndeclare component Bar();\n\nconst foo: Foo = <Foo />;\nconst bar: Bar = <Foo />; // ERROR\n")),(0,a.mdx)("p",null,"The syntax also works for generic components:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",1:!0,className:"language-flow",metastring:'[{"startLine":6,"startColumn":27,"endLine":6,"endColumn":41,"description":"Cannot assign `<Foo />` to `foo2` because string [1] is incompatible with number [2] in property `prop` of type argument `P` [3]. [incompatible-type-arg]"},{"startLine":7,"startColumn":13,"endLine":7,"endColumn":15,"description":"Cannot use component Foo [1] without 1 type argument. [missing-type-arg]"}]','[{"startLine":6,"startColumn":27,"endLine":6,"endColumn":41,"description":"Cannot':!0,assign:!0,"`<Foo":!0,"/>`":!0,to:!0,"`foo2`":!0,because:!0,string:!0,"[1]":!0,is:!0,incompatible:!0,with:!0,number:!0,"[2]":!0,in:!0,property:!0,"`prop`":!0,of:!0,type:!0,argument:!0,"`P`":!0,"[3].":!0,'[incompatible-type-arg]"},{"startLine":7,"startColumn":13,"endLine":7,"endColumn":15,"description":"Cannot':!0,use:!0,component:!0,Foo:!0,without:!0,"argument.":!0,'[missing-type-arg]"}]':!0},'import * as React from \'react\';\n\ndeclare component Foo<T>(prop: T);\n\nconst foo1: Foo<string> = <Foo prop="" />;\nconst foo2: Foo<number> = <Foo prop="" />; // Invalid generic type argument\nconst foo3: Foo = <Foo prop="" />; // Missing generic type argument\n')),(0,a.mdx)("p",null,"We do not recommend requiring very specific type of elements. It will make your parent and children components more coupled. Instead, this feature is designed to make expressing ",(0,a.mdx)("a",{parentName:"p",href:"../render-types"},"render types")," easier."),(0,a.mdx)("h2",{id:"rules-for-components"},"Rules for Components"),(0,a.mdx)("p",null,"Component Syntax enforces a few restrictions in components to help ensure correctness:"),(0,a.mdx)("ol",null,(0,a.mdx)("li",{parentName:"ol"},"The return values must be a subtype of ",(0,a.mdx)("inlineCode",{parentName:"li"},"React.Node"),", otherwise React may crash while rendering your component."),(0,a.mdx)("li",{parentName:"ol"},"All branches of a component must end in an explicit return. Even though ",(0,a.mdx)("inlineCode",{parentName:"li"},"undefined")," is a valid return value, we've seen many instances where an explicit return would have prevented bugs in production."),(0,a.mdx)("li",{parentName:"ol"},"You cannot use ",(0,a.mdx)("inlineCode",{parentName:"li"},"this")," in a component.")),(0,a.mdx)("p",null,"So these components are invalid:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-flow",metastring:'[{"startLine":4,"startColumn":10,"endLine":4,"endColumn":21,"description":"Cannot return `new Object()` because: [incompatible-return] Either `Object` [1] is incompatible with `React.Element` [2]. Or `Object` [1] is incompatible with `React.Portal` [3]. Or property `@@iterator` is missing in `Object` [1] but exists in `$Iterable` [4]."},{"startLine":7,"startColumn":1,"endLine":7,"endColumn":43,"description":"Cannot declare component because component ImplicitReturn [1] is not guaranteed to reach a return statement. An explicit return statement must be included for all possible branches. [component-missing-return]"},{"startLine":15,"startColumn":3,"endLine":15,"endColumn":6,"description":"Cannot reference `this` from within component declaration [1] [component-this-reference]"},{"startLine":15,"startColumn":8,"endLine":15,"endColumn":10,"description":"Cannot assign `3` to `this.foo` because property `foo` is missing in global object [1]. [prop-missing]"}]','[{"startLine":4,"startColumn":10,"endLine":4,"endColumn":21,"description":"Cannot':!0,return:!0,"`new":!0,"Object()`":!0,"because:":!0,"[incompatible-return]":!0,Either:!0,"`Object`":!0,"[1]":!0,is:!0,incompatible:!0,with:!0,"`React.Element`":!0,"[2].":!0,Or:!0,"`React.Portal`":!0,"[3].":!0,property:!0,"`@@iterator`":!0,missing:!0,in:!0,but:!0,exists:!0,"`$Iterable`":!0,'[4]."},{"startLine":7,"startColumn":1,"endLine":7,"endColumn":43,"description":"Cannot':!0,declare:!0,component:!0,because:!0,ImplicitReturn:!0,not:!0,guaranteed:!0,to:!0,reach:!0,a:!0,"statement.":!0,An:!0,explicit:!0,statement:!0,must:!0,be:!0,included:!0,for:!0,all:!0,possible:!0,"branches.":!0,'[component-missing-return]"},{"startLine":15,"startColumn":3,"endLine":15,"endColumn":6,"description":"Cannot':!0,reference:!0,"`this`":!0,from:!0,within:!0,declaration:!0,'[component-this-reference]"},{"startLine":15,"startColumn":8,"endLine":15,"endColumn":10,"description":"Cannot':!0,assign:!0,"`3`":!0,"`this.foo`":!0,"`foo`":!0,global:!0,object:!0,"[1].":!0,'[prop-missing]"}]':!0},"import * as React from 'react';\n\ncomponent InvalidReturnValue() {\n  return new Object(); // ERROR: Value does not match `React.Node` type\n}\n\ncomponent ImplicitReturn(someCond: boolean) {\n  if (someCond) {\n    return <h1>Hello World!</h1>;\n  }\n  // ERROR: No return in this branch\n}\n\ncomponent UsesThis() {\n  this.foo = 3; // ERROR: Accessing `this`\n  return null;\n}\n")),(0,a.mdx)("h2",{id:"toc-enable-component-syntax"},"Enable Component Syntax"),(0,a.mdx)("p",null,"In your ",(0,a.mdx)("inlineCode",{parentName:"p"},".flowconfig"),", under the ",(0,a.mdx)("inlineCode",{parentName:"p"},"[options]")," heading, add ",(0,a.mdx)("inlineCode",{parentName:"p"},"component_syntax=true"),"."))}c.isMDXComponent=!0}}]);